---
plan_id: plan_mll9pkws_485d6ff0
created_at: 2026-02-13T19:20:02.247Z
sanitized: false
injection_attempts: 0
warnings: 0
---

# Research: Cross-Workspace Deployment Model\n\n## How Agents Get Deployed to Workspaces\n\n### `memory_agent(action: deploy)`\nDeploys agent files to a target workspace.\n\n**Parameters:**\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| `workspace_path` | string | ✅ | Absolute path to target workspace |\n| `agents` | string[] | ❌ | Specific agents to deploy (default: all) |\n| `include_prompts` | boolean | ❌ | Include prompt files |\n| `include_instructions` | boolean | ❌ | Include instruction files |\n| `include_skills` | boolean | ❌ | Include skills from skills directory |\n\n### What Gets Deployed\n- Agent definition files (`.agent.md`) → target's `agents/` directory\n- Prompt files → target's `prompts/` directory  \n- Instruction files → target's `instructions/` directory\n- Skill files → target's `.github/skills/` directory\n\n### Workspace Identity\n- Each workspace has a `workspace_id` generated from its directory name + hash\n- The `.projectmemory/identity.json` file is the canonical source\n- `memory_workspace(action: register)` creates/returns the workspace_id\n- Agents receive `workspace_id` from the Coordinator prompt or handoff context\n- Agents must NOT derive/compute workspace IDs themselves\n\n### How SkillWriter Would Work Cross-Workspace\n1. **Coordinator registers the foreign workspace**: `memory_workspace(action: register, workspace_path: \"/path/to/foreign\")`\n2. **Coordinator deploys SkillWriter**: passes foreign `workspace_id` and `workspace_path` in the deployment prompt\n3. **SkillWriter receives**: `workspace_id` (foreign), `workspace_path` (foreign), plus its plan context from PM's own workspace\n4. **SkillWriter reads files** from the foreign workspace path\n5. **SkillWriter creates/modifies files** in the foreign workspace's `.github/skills/` and `.github/instructions/` directories\n\n### Important Considerations\n- SkillWriter currently only creates files in `.github/skills/`. For refactoring mode it also needs to:\n  - Read from `.github/instructions/` (or wherever the target workspace stores its rules)\n  - Move/rename/delete instruction files\n  - Create new skill files in `.github/skills/`\n  - Update/merge existing skill files\n- The plan and context data stay in PM's data directory (keyed by PM's workspace_id and plan_id)\n- File operations happen in the foreign workspace's file system\n- SkillWriter needs the foreign workspace PATH for file I/O, but uses PM's workspace_id for plan tracking\n\n### Dual-Workspace Pattern\nThis creates a dual-workspace scenario:\n- **Plan workspace**: PM's workspace (where the plan lives, context is stored)\n- **Target workspace**: Foreign workspace (where files are read/modified)\n\nThe Coordinator prompt must make this distinction clear. SkillWriter needs to:\n- Use PM's `workspace_id` for all `memory_*` calls (plan, steps, context)\n- Use the foreign `workspace_path` for all file read/write operations"