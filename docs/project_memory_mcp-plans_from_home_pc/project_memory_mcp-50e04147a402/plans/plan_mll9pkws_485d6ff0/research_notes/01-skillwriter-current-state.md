---
plan_id: plan_mll9pkws_485d6ff0
created_at: 2026-02-13T19:18:45.379Z
sanitized: false
injection_attempts: 0
warnings: 0
---

# Research: Current SkillWriter Agent State\n\n## Source\n- File: `agents/skill-writer.agent.md` (~200 lines)\n\n## Current Workflow Mode\nSkillWriter has exactly **one workflow mode**: \"analyze codebase and generate SKILL.md files\"\n\n### Current Workflow Steps:\n1. Init + validate\n2. Analyze the codebase:\n   - Read project configuration files (package.json, tsconfig.json, etc.)\n   - Identify primary languages and frameworks\n   - Scan directory structure for patterns\n   - Read representative source files for conventions\n3. Identify skill candidates:\n   - Look for repeated patterns across multiple files\n   - Note architectural decisions and conventions\n   - Identify framework-specific usage patterns\n4. Generate SKILL.md files:\n   - One skill per distinct pattern/domain\n   - Place in `.github/skills/{skill-name}/SKILL.md`\n   - Include concrete code examples\n   - Write clear trigger conditions in the description\n5. Update step status\n6. Handoff to Coordinator → recommend Reviewer\n\n## SkillWriter Constraints\n- **Cannot modify source code** (`.ts`, `.js`, `.py`, `.tsx`, etc.)\n- **Cannot modify agent definition files**\n- **Cannot create/edit test files**\n- **Cannot modify config files**\n- **Cannot run build/test commands**\n- CAN read any source file\n- CAN create/update SKILL.md files in `.github/skills/`\n\n## SKILL.md Template Format\nFrontmatter fields: `name` (required), `description` (required), `category` (required, enum), `tags` (required), `language_targets` (optional), `framework_targets` (optional)\n\nCategories: architecture, testing, deployment, frontend, backend, database, devops, security\n\n## Exit Conditions\n| Condition | Recommendation | Handoff Reason |\n|-----------|----------------|----------------|\n| Skills generated | Reviewer | \"Skills generated, ready for review\" |\n| No patterns found | Coordinator | \"No actionable skill patterns found\" |\n| Blocked/error | Revisionist | \"Blocked: [error]\" |\n\n## What Needs to Change for Cross-Workspace Refactoring\n### Sections Requiring MODIFICATION:\n1. **\"Your Mission\"** — Currently says only \"analyze codebase to generate skills\". Needs to support \"refactor existing instructions\" mode.\n2. **\"⚠️ CRITICAL: What You Can and Cannot Do\"** — Currently restricts to `.github/skills/` only. Need to add permissions for editing/moving/deleting instruction files.\n3. **\"Workflow\"** — Currently only has \"analyze and generate\" flow. Needs a second \"classify and refactor\" flow.\n4. **\"Exit Conditions\"** — Needs additional conditions for the refactor mode.\n\n### Sections Requiring ADDITION:\n1. **New \"Workflow Modes\" section** — Define mode: \"create\" (existing) vs mode: \"refactor\" (new)\n2. **Classification Heuristics** — Rules for classifying instructions vs skills vs delete\n3. **User Confirmation Gate** — Present classification to user before executing changes\n4. **Cross-Workspace Identity** — How to handle `workspace_id` for foreign workspaces\n5. **Instruction File Analysis** — How to read and parse existing instruction files\n6. **Protected File List** — Files that must never be touched\n\n### Agent Size Concern\nCurrent: ~200 lines. Adding all new sections could push to 350-400+ lines.\nMay need to extract some content to instruction files (e.g., `instructions/skillwriter-refactoring.instructions.md`)."