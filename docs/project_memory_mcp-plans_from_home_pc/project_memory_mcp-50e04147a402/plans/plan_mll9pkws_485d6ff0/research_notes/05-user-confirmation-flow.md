---
plan_id: plan_mll9pkws_485d6ff0
created_at: 2026-02-13T19:20:31.387Z
sanitized: false
injection_attempts: 0
warnings: 0
---

# Research: User Confirmation Flow Patterns\n\n## Existing Confirmation Mechanisms in PM System\n\n### 1. Plan-Level Confirmation (`memory_plan action: confirm`)\nConfirm a phase or step when user approval is required.\n\n**Parameters:**\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| `confirmation_scope` | string | ‚úÖ | `\"phase\"` or `\"step\"` |\n| `confirm_phase` | string | ‚ùå | Required when scope is phase |\n| `confirm_step_index` | number | ‚ùå | Required when scope is step |\n| `confirmed_by` | string | ‚ùå | Who confirmed (e.g., `\"user\"`) |\n\nUsed by: Coordinator.\n\n### 2. Step-Level Confirmation Properties\nSteps can have:\n- `requires_confirmation: true` ‚Äî Step needs confirmation before proceeding\n- `requires_user_confirmation: true` ‚Äî Step specifically needs USER confirmation\n- `type: \"user_validation\"` ‚Äî Step type indicating user review needed\n- `type: \"confirmation\"` ‚Äî Step type for confirmation gates\n\n### 3. Destructive Action Confirmation\nPlan deletion requires `confirm: true` parameter. This is a simple boolean gate.\n\n## Proposed Confirmation Flow for SkillWriter Refactoring\n\nThe existing PM confirmation gates are designed for step-level flow control within plans. For SkillWriter's classification output, we need a richer pattern:\n\n### Recommended: \"Classification Report\" Pattern\n\n1. **SkillWriter analyzes all instruction files** in the target workspace\n2. **SkillWriter generates a Classification Report** ‚Äî presented as a structured summary:\n   ```\n   ## Classification Report for {workspace_name}\n   \n   ### ‚úÖ KEEP as Instruction (3 files)\n   - `avoid-monolithic-files.instructions.md` ‚Äî Workspace-specific rule\n   - `handoff-protocol.instructions.md` ‚Äî Agent behavioral protocol\n   - `not-for-you.instructions.md` ‚Äî Access boundary\n   \n   ### üîÑ CONVERT to Skill (2 files)\n   - `pyside6-patterns.instructions.md` ‚Üí `.github/skills/pyside6-patterns/SKILL.md`\n     Reason: Domain knowledge about PySide6 framework, reusable across workspaces\n   - `react-hooks.instructions.md` ‚Üí `.github/skills/react-hooks/SKILL.md`\n     Reason: Framework-specific patterns, not operational rules\n   \n   ### üóëÔ∏è DELETE/Consolidate (1 file)\n   - `old-build-guide.instructions.md` ‚Äî Outdated, superseded by build-scripts.instructions.md\n   \n   ### üîí PROTECTED (not touching)\n   - `*.agent.md` files\n   - Security-related instructions\n   ```\n3. **Step with `type: \"user_validation\"` + `requires_user_confirmation: true`** is created\n4. **Coordinator presents the report to the user** and asks for approval\n5. **User confirms** via `memory_plan(action: confirm, confirmation_scope: \"step\", ...)`\n6. **SkillWriter executes** the approved changes only\n\n### Implementation in Plan Steps\n```json\n[\n  { \"phase\": \"Classification\", \"task\": \"Scan and classify all instruction files\", \"assignee\": \"SkillWriter\" },\n  { \"phase\": \"Classification\", \"task\": \"Present classification report to user for approval\", \"type\": \"user_validation\", \"requires_user_confirmation\": true, \"assignee\": \"Coordinator\" },\n  { \"phase\": \"Execution\", \"task\": \"Execute approved conversions\", \"assignee\": \"SkillWriter\" },\n  { \"phase\": \"Execution\", \"task\": \"Execute approved deletions\", \"assignee\": \"SkillWriter\" },\n  { \"phase\": \"Cleanup\", \"task\": \"Verify file structure and update index files\", \"assignee\": \"SkillWriter\" }\n]\n```\n\n### Key Design Decisions\n- Classification and execution are **separate phases** ‚Äî never classify and execute in one step\n- User has **line-item veto** ‚Äî can modify the classification before approving\n- SkillWriter **stores the classification** via `memory_context(action: store, type: \"classification\")` so the Coordinator can present it\n- The Coordinator handles the actual user interaction, not SkillWriter (spoke agents don't interact with users directly)\n- If user modifies the classification, the updated version is stored back and SkillWriter reads it"